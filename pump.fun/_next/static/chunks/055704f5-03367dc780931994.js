"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8589],{18028:function(e,t,n){n.d(t,{$k:function(){return eb},Aw:function(){return z},BL:function(){return W},Dz:function(){return O},FL:function(){return ey},IC:function(){return eV},Ih:function(){return $},Me:function(){return eZ},QG:function(){return D},Sh:function(){return eT},V7:function(){return ez},Z5:function(){return eF},eR:function(){return ee},eY:function(){return B},fZ:function(){return Q},fc:function(){return R},g1:function(){return U},j1:function(){return H},mm:function(){return j},nN:function(){return eQ},qT:function(){return eC},u7:function(){return K},vM:function(){return X},y7:function(){return eO}});var r,a=n(2265),l=n(91749),i=n(44839),c=n(79971),o=n(70750);n(25566);var u=Object.defineProperty,s=Object.defineProperties,d=Object.getOwnPropertyDescriptors,f=Object.getOwnPropertySymbols,p=Object.prototype.hasOwnProperty,m=Object.prototype.propertyIsEnumerable,h=(e,t,n)=>t in e?u(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,v=(e,t)=>{for(var n in t||(t={}))p.call(t,n)&&h(e,n,t[n]);if(f)for(var n of f(t))m.call(t,n)&&h(e,n,t[n]);return e},g=(e,t)=>s(e,d(t)),E=(e,t)=>{var n={};for(var r in e)p.call(e,r)&&0>t.indexOf(r)&&(n[r]=e[r]);if(null!=e&&f)for(var r of f(e))0>t.indexOf(r)&&m.call(e,r)&&(n[r]=e[r]);return n},b=e=>{let t=a.useRef(e);return a.useEffect(()=>{t.current=e}),t},w=()=>r||(r=function(){let e=!1,t=[],n=new Map;if("undefined"==typeof window)return;let r=new ResizeObserver((r,a)=>{t=t.concat(r),e||window.requestAnimationFrame(()=>{let r=new Set;for(let e=0;e<t.length;e++){if(r.has(t[e].target))continue;r.add(t[e].target);let l=n.get(t[e].target);null==l||l.forEach(n=>n(t[e],a))}t=[],e=!1}),e=!0});return{observer:r,subscribe(e,t){var a;r.observe(e);let l=null!=(a=n.get(e))?a:[];l.push(t),n.set(e,l)},unsubscribe(e,t){var a;let l=null!=(a=n.get(e))?a:[];if(1===l.length){r.unobserve(e),n.delete(e);return}let i=l.indexOf(t);-1!==i&&l.splice(i,1),n.set(e,l)}}}()),k=e=>{let[t,n]=a.useState({width:0,height:0});return a.useLayoutEffect(()=>{if(e.current){let{width:t,height:r}=e.current.getBoundingClientRect();n({width:t,height:r})}},[e.current]),!function(e,t){let n=w(),r=b(t);a.useLayoutEffect(()=>{let t=!1,a=e.current;if(a)return null==n||n.subscribe(a,l),()=>{t=!0,null==n||n.unsubscribe(a,l)};function l(e,n){t||r.current(e,n)}},[e.current,n,r]),null==n||n.observer}(e,a.useCallback(e=>n(e.contentRect),[])),t};function M(e,t,n=!0){let[r,l]=a.useState(t);return a.useEffect(()=>{if(n&&l(t),"undefined"==typeof window||!e)return;let r=e.subscribe(l);return()=>r.unsubscribe()},[e,n]),r}function y(e,t){if("show_chat"===t.msg)return g(v({},e),{showChat:!0,unreadMessages:0});if("hide_chat"===t.msg)return g(v({},e),{showChat:!1});if("toggle_chat"===t.msg){let t=g(v({},e),{showChat:!e.showChat});return!0===t.showChat&&(t.unreadMessages=0),t}return"unread_msg"===t.msg?g(v({},e),{unreadMessages:t.count}):"toggle_settings"===t.msg?g(v({},e),{showSettings:!e.showSettings}):v({},e)}function S(e,t){return"set_pin"===t.msg?[t.trackReference]:"clear_pin"===t.msg?[]:v({},e)}var C=a.createContext(void 0);function R(){let[e,t]=a.useReducer(S,l.R0),[n,r]=a.useReducer(y,l.lA);return{pin:{dispatch:t,state:e},widget:{dispatch:r,state:n}}}function x(){return a.useContext(C)}var P=a.createContext(void 0);function O(){return a.useContext(P)}function z(e){let t=O(),n=null!=e?e:t;if(!n)throw Error("No TrackRef, make sure you are inside a TrackRefContext or pass the TrackRef explicitly");return n}var A=a.createContext(void 0);function L(){return a.useContext(A)}function N(e){var t;let n=L(),r=O(),a=null!=(t=null!=e?e:n)?t:null==r?void 0:r.participant;if(!a)throw Error("No participant provided, make sure you are inside a participant context or pass the participant explicitly");return a}var Z=a.createContext(void 0);function Q(){let e=a.useContext(Z);if(!e)throw Error("tried to access room context outside of livekit room component");return e}function T(){return a.useContext(Z)}function V(e){let t=T(),n=null!=e?e:t;if(!n)throw Error("No room provided, make sure you are inside a Room context or pass the room explicitly");return n}var F=a.createContext(void 0);function I(...e){let t=v({},e[0]);for(let n=1;n<e.length;n++){let r=e[n];for(let e in r){let n=t[e],a=r[e];"function"==typeof n&&"function"==typeof a&&"o"===e[0]&&"n"===e[1]&&e.charCodeAt(2)>=65&&90>=e.charCodeAt(2)?t[e]=function(...e){return(...t)=>{for(let n of e)if("function"==typeof n)try{n(...t)}catch(e){console.error(e)}}}(n,a):("className"===e||"UNSAFE_className"===e)&&"string"==typeof n&&"string"==typeof a?t[e]=(0,i.Z)(n,a):t[e]=void 0!==a?a:n}}return t}function D(e,t){let n="function"==typeof e?e:t,r="string"==typeof e?e:void 0,i=Q(),{send:c,messageObservable:o,isSendingObservable:u}=a.useMemo(()=>(0,l.wL)(i,r,n),[i,r,n]);return{message:M(o,void 0),send:c,isSending:M(u,!1)}}function _(e,t={}){var n,r;let i=N("string"==typeof e?t.participant:e.participant),c="string"==typeof e?{participant:i,source:e}:e,[o,u]=a.useState(!!((null==(n=c.publication)?void 0:n.isMuted)||(null==(r=i.getTrackPublication(c.source))?void 0:r.isMuted)));return a.useEffect(()=>{let e=(0,l.oJ)(c).subscribe(u);return()=>e.unsubscribe()},[(0,l.Fq)(c)]),o}var q={connect:!0,audio:!1,video:!1};function H(e={}){let t=V(e.room),[n,r]=a.useState(t.localParticipant),[i,c]=a.useState(n.isMicrophoneEnabled),[o,u]=a.useState(n.isMicrophoneEnabled),[s,d]=a.useState(n.lastMicrophoneError),[f,p]=a.useState(n.lastCameraError),[m,h]=a.useState(n.isMicrophoneEnabled),[v,g]=a.useState(void 0),[E,b]=a.useState(void 0),w=e=>{u(e.isCameraEnabled),c(e.isMicrophoneEnabled),h(e.isScreenShareEnabled),b(e.cameraTrack),g(e.microphoneTrack),d(e.participant.lastMicrophoneError),p(e.participant.lastCameraError),r(e.participant)};return a.useEffect(()=>{let e=(0,l._u)(t.localParticipant).subscribe(w);return()=>e.unsubscribe()},[t]),{isMicrophoneEnabled:i,isScreenShareEnabled:m,isCameraEnabled:o,microphoneTrack:v,cameraTrack:E,lastMicrophoneError:s,lastCameraError:f,localParticipant:n}}function j({kind:e,room:t,track:n,requestPermissions:r,onError:i}){let c=T(),o=M(a.useMemo(()=>(0,l.x)(e,i,r),[e,r,i]),[]),[u,s]=a.useState(""),{className:d,activeDeviceObservable:f,setActiveMediaDevice:p}=a.useMemo(()=>(0,l.T2)(e,null!=t?t:c,n),[e,t,c,n]);return a.useEffect(()=>{let e=f.subscribe(e=>{l.cM.info("setCurrentDeviceId",e),e&&s(e)});return()=>{null==e||e.unsubscribe()}},[f]),{devices:o,className:d,activeDeviceId:u,setActiveMediaDevice:p}}function J(e,t,n={}){let r=a.useRef([]),i=a.useRef(-1),c=t!==i.current,o="function"==typeof n.customSortFunction?n.customSortFunction(e):(0,l.lG)(e),u=[...o];if(!1===c)try{u=(0,l.f1)(r.current,o,t)}catch(e){l.cM.error("Error while running updatePages(): ",e)}return c?r.current=o:r.current=u,i.current=t,u}function U(e={}){let t=V(e.room),[n,r]=a.useState([]);return a.useEffect(()=>{let n=(0,l.pg)(t,{additionalRoomEvents:e.updateOnlyOn}).subscribe(r);return()=>n.unsubscribe()},[t,JSON.stringify(e.updateOnlyOn)]),n}function W(e={}){let t=U(e),{localParticipant:n}=H(e);return a.useMemo(()=>[n,...t],[n,t])}function B(e){return e=function(e){let t=x();if(null!=e||(e=t),!e)throw Error("Tried to access LayoutContext context outside a LayoutContextProvider provider.");return e}(e),a.useMemo(()=>(null==e?void 0:e.pin.state)!==void 0&&e.pin.state.length>=1?e.pin.state:[],[e.pin.state])}function $(e=[c.fQ.Source.Camera,c.fQ.Source.Microphone,c.fQ.Source.ScreenShare,c.fQ.Source.ScreenShareAudio,c.fQ.Source.Unknown],t={}){let n=V(t.room),[r,i]=a.useState([]),[o,u]=a.useState([]),s=a.useMemo(()=>e.map(e=>(0,l.Cw)(e)?e.source:e),[JSON.stringify(e)]);return a.useEffect(()=>{let e=(0,l.ic)(n,s,{additionalRoomEvents:t.updateOnlyOn,onlySubscribed:t.onlySubscribed}).subscribe(({trackReferences:e,participants:t})=>{l.cM.debug("setting track bundles",e,t),i(e),u(t)});return()=>e.unsubscribe()},[n,JSON.stringify(t.onlySubscribed),JSON.stringify(t.updateOnlyOn),JSON.stringify(e)]),a.useMemo(()=>{if(!(0,l.ZX)(e))return r;{let t=function(e,t){let n=new Map;if((0,l.ZX)(e)){let r=e.filter(e=>e.withPlaceholder).map(e=>e.source);t.forEach(e=>{let t=e.getTrackPublications().map(e=>{var t;return null==(t=e.track)?void 0:t.source}).filter(e=>void 0!==e),a=Array.from(function(e,t){let n=new Set(e);for(let e of t)n.delete(e);return n}(new Set(r),new Set(t)));a.length>0&&n.set(e.identity,a)})}return n}(e,o),n=Array.from(r);return o.forEach(e=>{var a;t.has(e.identity)&&(null!=(a=t.get(e.identity))?a:[]).forEach(t=>{r.find(({participant:n,publication:r})=>e.identity===n.identity&&r.source===t)||(l.cM.debug(`Add ${t} placeholder for participant ${e.identity}.`),n.push({participant:e,source:t}))})}),n}},[r,o,e])}function X(e={}){var t;let[n,r]=a.useState((0,l.Dw)(e.defaults,null!=(t=e.preventLoad)&&t)),i=a.useCallback(e=>{r(t=>g(v({},t),{audioEnabled:e}))},[]),c=a.useCallback(e=>{r(t=>g(v({},t),{videoEnabled:e}))},[]),o=a.useCallback(e=>{r(t=>g(v({},t),{audioDeviceId:e}))},[]),u=a.useCallback(e=>{r(t=>g(v({},t),{videoDeviceId:e}))},[]),s=a.useCallback(e=>{r(t=>g(v({},t),{username:e}))},[]);return a.useEffect(()=>{var t;(0,l.nu)(n,null!=(t=e.preventSave)&&t)},[n,e.preventSave]),{userChoices:n,saveAudioInputEnabled:i,saveVideoInputEnabled:c,saveAudioInputDeviceId:o,saveVideoInputDeviceId:u,saveUsername:s}}var G=e=>{let t=e=>Math.sqrt(1- -1*Math.max(-100,Math.min(-10,e))/100);return e.map(e=>e===-1/0?0:t(e))},Y={bands:5,loPass:100,hiPass:600,updateInterval:32,analyserOptions:{fftSize:2048}};function K(e,t={}){var n;let r=e instanceof c.fQ?e:null==(n=null==e?void 0:e.publication)?void 0:n.track,l=v(v({},Y),t),[i,o]=a.useState(Array(l.bands).fill(0));return a.useEffect(()=>{if(!r||!(null==r?void 0:r.mediaStream))return;let{analyser:e,cleanup:n}=(0,c.OE)(r,l.analyserOptions),a=new Float32Array(e.frequencyBinCount),i=setInterval(()=>{e.getFloatFrequencyData(a);let n=new Float32Array(a.length);for(let e=0;e<a.length;e++)n[e]=a[e];let r=G(n=n.slice(t.loPass,t.hiPass)),i=Math.ceil(r.length/l.bands),c=[];for(let e=0;e<l.bands;e++){let t=r.slice(e*i,(e+1)*i).reduce((e,t)=>e+=t,0);c.push(t/i)}o(c)},l.updateInterval);return()=>{n(),clearInterval(i)}},[r,null==r?void 0:r.mediaStream,JSON.stringify(t)]),i}function ee(e,t){let n=Q(),r=L(),i=t?n.getParticipantByIdentity(t):r;return M(a.useMemo(()=>i?(0,l.Kn)(i,{sources:e}):void 0,[null==i?void 0:i.sid,null==i?void 0:i.identity,JSON.stringify(e)]),[])}var et=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),a.createElement("path",{d:"M1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708L11 10.293V4.5A1.5 1.5 0 0 0 9.5 3H3.707zM0 4.5a1.5 1.5 0 0 1 .943-1.393l9.532 9.533c-.262.224-.603.36-.975.36h-8A1.5 1.5 0 0 1 0 11.5z"}),a.createElement("path",{d:"m15.2 3.6-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),en=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),a.createElement("path",{d:"M0 4.5A1.5 1.5 0 0 1 1.5 3h8A1.5 1.5 0 0 1 11 4.5v7A1.5 1.5 0 0 1 9.5 13h-8A1.5 1.5 0 0 1 0 11.5zM15.2 3.6l-2.8 2.1a1 1 0 0 0-.4.8v3a1 1 0 0 0 .4.8l2.8 2.1a.5.5 0 0 0 .8-.4V4a.5.5 0 0 0-.8-.4z"})),er=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),a.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M5.293 2.293a1 1 0 0 1 1.414 0l4.823 4.823a1.25 1.25 0 0 1 0 1.768l-4.823 4.823a1 1 0 0 1-1.414-1.414L9.586 8 5.293 3.707a1 1 0 0 1 0-1.414z",clipRule:"evenodd"})),ea=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),a.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("path",{d:"M10 1.75h4.25m0 0V6m0-4.25L9 7M6 14.25H1.75m0 0V10m0 4.25L7 9"}))),el=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),a.createElement("path",{fill:"currentcolor",fillRule:"evenodd",d:"M4 6.104V4a4 4 0 1 1 8 0v2.104c1.154.326 2 1.387 2 2.646v4.5A2.75 2.75 0 0 1 11.25 16h-6.5A2.75 2.75 0 0 1 2 13.25v-4.5c0-1.259.846-2.32 2-2.646ZM5.5 4a2.5 2.5 0 0 1 5 0v2h-5V4Z",clipRule:"evenodd"})),ei=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),a.createElement("path",{d:"M12.227 11.52a5.477 5.477 0 0 0 1.246-2.97.5.5 0 0 0-.995-.1 4.478 4.478 0 0 1-.962 2.359l-1.07-1.07C10.794 9.247 11 8.647 11 8V3a3 3 0 0 0-6 0v1.293L1.354.646a.5.5 0 1 0-.708.708l14 14a.5.5 0 0 0 .708-.708zM8 12.5c.683 0 1.33-.152 1.911-.425l.743.743c-.649.359-1.378.59-2.154.66V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .995-.098A4.5 4.5 0 0 0 8 12.5z"}),a.createElement("path",{d:"M8.743 10.907 5 7.164V8a3 3 0 0 0 3.743 2.907z"})),ec=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),a.createElement("path",{fillRule:"evenodd",d:"M2.975 8.002a.5.5 0 0 1 .547.449 4.5 4.5 0 0 0 8.956 0 .5.5 0 1 1 .995.098A5.502 5.502 0 0 1 8.5 13.478V15h2a.5.5 0 0 1 0 1h-5a.5.5 0 0 1 0-1h2v-1.522a5.502 5.502 0 0 1-4.973-4.929.5.5 0 0 1 .448-.547z",clipRule:"evenodd"}),a.createElement("path",{d:"M5 3a3 3 0 1 1 6 0v5a3 3 0 0 1-6 0z"})),eo=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"})),eu=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("g",{opacity:.25},a.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),es=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentcolor"},e),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("g",{opacity:.25},a.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("path",{d:"M6 6.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}),a.createElement("path",{d:"M12 .5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5z"}))),ed=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),a.createElement("g",{opacity:.25},a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}),a.createElement("path",{d:"M0 11.5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v4a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-4Zm6-5a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-9Zm6-6a.5.5 0 0 1 .5-.5h3a.5.5 0 0 1 .5.5v15a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5V.5Z"}))),ef=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M0 2.75A2.75 2.75 0 0 1 2.75 0h14.5A2.75 2.75 0 0 1 20 2.75v10.5A2.75 2.75 0 0 1 17.25 16H2.75A2.75 2.75 0 0 1 0 13.25V2.75ZM2.75 1.5c-.69 0-1.25.56-1.25 1.25v10.5c0 .69.56 1.25 1.25 1.25h14.5c.69 0 1.25-.56 1.25-1.25V2.75c0-.69-.56-1.25-1.25-1.25H2.75Z",clipRule:"evenodd"}),a.createElement("path",{fill:"currentColor",fillRule:"evenodd",d:"M9.47 4.22a.75.75 0 0 1 1.06 0l2.25 2.25a.75.75 0 0 1-1.06 1.06l-.97-.97v4.69a.75.75 0 0 1-1.5 0V6.56l-.97.97a.75.75 0 0 1-1.06-1.06l2.25-2.25Z",clipRule:"evenodd"})),ep=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:20,height:16,fill:"none"},e),a.createElement("g",{fill:"currentColor"},a.createElement("path",{d:"M7.28 4.22a.75.75 0 0 0-1.06 1.06L8.94 8l-2.72 2.72a.75.75 0 1 0 1.06 1.06L10 9.06l2.72 2.72a.75.75 0 1 0 1.06-1.06L11.06 8l2.72-2.72a.75.75 0 0 0-1.06-1.06L10 6.94z"}),a.createElement("path",{fillRule:"evenodd",d:"M2.75 0A2.75 2.75 0 0 0 0 2.75v10.5A2.75 2.75 0 0 0 2.75 16h14.5A2.75 2.75 0 0 0 20 13.25V2.75A2.75 2.75 0 0 0 17.25 0zM1.5 2.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v10.5c0 .69-.56 1.25-1.25 1.25H2.75c-.69 0-1.25-.56-1.25-1.25z",clipRule:"evenodd"}))),em=e=>a.createElement("svg",v({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),a.createElement("g",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5},a.createElement("path",{d:"M13.25 7H9m0 0V2.75M9 7l5.25-5.25M2.75 9H7m0 0v4.25M7 9l-5.25 5.25"}))),eh=a.forwardRef(function(e,t){var{trackRef:n}=e,r=E(e,["trackRef"]);let i=O(),{mergedProps:c,inFocus:o}=function({trackRef:e,props:t}){let n=z(e),r=x(),{className:i}=a.useMemo(()=>(0,l.lq)(),[]),c=a.useMemo(()=>(0,l.WD)(n,null==r?void 0:r.pin.state),[n,null==r?void 0:r.pin.state]);return{mergedProps:a.useMemo(()=>I(t,{className:i,onClick:e=>{var a,l,i,o,u;null==(a=t.onClick)||a.call(t,e),c?null==(i=null==r?void 0:(l=r.pin).dispatch)||i.call(l,{msg:"clear_pin"}):null==(u=null==r?void 0:(o=r.pin).dispatch)||u.call(o,{msg:"set_pin",trackReference:n})}}),[t,i,n,c,null==r?void 0:r.pin]),inFocus:c}}({trackRef:null!=n?n:i,props:r});return a.createElement(C.Consumer,null,e=>void 0!==e&&a.createElement("button",v({ref:t},c),r.children?r.children:o?a.createElement(em,null):a.createElement(ea,null)))});function ev(e){return void 0!==e}function eg(...e){return I(...e.filter(ev))}function eE(e,t){switch(e){case c.fQ.Source.Microphone:return t?a.createElement(ec,null):a.createElement(ei,null);case c.fQ.Source.Camera:return t?a.createElement(en,null):a.createElement(et,null);case c.fQ.Source.ScreenShare:return t?a.createElement(ep,null):a.createElement(ef,null);default:return}}var eb=a.forwardRef(function(e,t){var{showIcon:n}=e,r=E(e,["showIcon"]);let{buttonProps:i,enabled:c}=function(e){var t,{source:n,onChange:r,initialState:i,captureOptions:c,publishOptions:o,onDeviceError:u}=e,s=E(e,["source","onChange","initialState","captureOptions","publishOptions","onDeviceError"]);let d=T(),f=null==(t=null==d?void 0:d.localParticipant)?void 0:t.getTrackPublication(n),p=a.useRef(!1),{toggle:m,className:h,pendingObserver:b,enabledObserver:w}=a.useMemo(()=>d?(0,l.Rd)(n,d,c,o,u):(0,l.ac)(),[d,n,JSON.stringify(c),o]),k=M(b,!1),y=M(w,null!=i?i:!!(null==f?void 0:f.isEnabled));a.useEffect(()=>{null==r||r(y,p.current),p.current=!1},[y,r]),a.useEffect(()=>{void 0!==i&&(l.cM.debug("forcing initial toggle state",n,i),m(i))},[]);let S=a.useMemo(()=>I(s,{className:h}),[s,h]),C=a.useCallback(e=>{var t;p.current=!0,m().catch(()=>p.current=!1),null==(t=s.onClick)||t.call(s,e)},[s,m]);return{toggle:m,enabled:y,pending:k,track:f,buttonProps:g(v({},S),{"aria-pressed":y,"data-lk-source":n,"data-lk-enabled":y,disabled:k,onClick:C})}}(r);return a.createElement("button",v({ref:t},i),(null==n||n)&&eE(r.source,c),r.children)}),ew=a.forwardRef(function(e,t){var n;let{className:r,quality:i}=function(e={}){let t=N(e.participant),{className:n,connectionQualityObserver:r}=a.useMemo(()=>(0,l.Zl)(t),[t]);return{className:n,quality:M(r,c.ZV.Unknown)}}(e),o=a.useMemo(()=>g(v({},eg(e,{className:r})),{"data-lk-quality":i}),[i,e,r]);return a.createElement("div",v({ref:t},o),null!=(n=e.children)?n:function(e){switch(e){case c.ZV.Excellent:return a.createElement(eo,null);case c.ZV.Good:return a.createElement(eu,null);case c.ZV.Poor:return a.createElement(es,null);default:return a.createElement(ed,null)}}(i))}),ek=a.forwardRef(function(e,t){var{participant:n}=e,r=E(e,["participant"]);let i=N(n),{className:c,infoObserver:o}=a.useMemo(()=>(0,l.Mr)(i),[i]),{identity:u,name:s}=M(o,{name:i.name,identity:i.identity,metadata:i.metadata}),d=a.useMemo(()=>eg(r,{className:c,"data-lk-participant-name":s}),[r,c,s]);return a.createElement("span",v({ref:t},d),""!==s?s:u,r.children)}),eM=a.forwardRef(function(e,t){var n,{trackRef:r,show:i="always"}=e,c=E(e,["trackRef","show"]);let{className:o,isMuted:u}=function(e){var t,n;let r=z(e),{className:i,mediaMutedObserver:c}=a.useMemo(()=>(0,l.Hn)(r),[(0,l.Fq)(r)]);return{isMuted:M(c,!!((null==(t=r.publication)?void 0:t.isMuted)||(null==(n=r.participant.getTrackPublication(r.source))?void 0:n.isMuted))),className:i}}(r),s="always"===i||"muted"===i&&u||"unmuted"===i&&!u,d=a.useMemo(()=>eg(c,{className:o}),[o,c]);return s?a.createElement("div",g(v({ref:t},d),{"data-lk-muted":u}),null!=(n=c.children)?n:eE(r.source,!u)):null}),ey=e=>a.createElement("svg",v({width:320,height:320,viewBox:"0 0 320 320",preserveAspectRatio:"xMidYMid meet",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),a.createElement("path",{d:"M160 180C204.182 180 240 144.183 240 100C240 55.8172 204.182 20 160 20C115.817 20 79.9997 55.8172 79.9997 100C79.9997 144.183 115.817 180 160 180Z",fill:"white",fillOpacity:.25}),a.createElement("path",{d:"M97.6542 194.614C103.267 191.818 109.841 192.481 115.519 195.141C129.025 201.466 144.1 205 159.999 205C175.899 205 190.973 201.466 204.48 195.141C210.158 192.481 216.732 191.818 222.345 194.614C262.703 214.719 291.985 253.736 298.591 300.062C300.15 310.997 291.045 320 280 320H39.9997C28.954 320 19.8495 310.997 21.4087 300.062C28.014 253.736 57.2966 214.72 97.6542 194.614Z",fill:"white",fillOpacity:.25}));function eS(e,t={}){var n;let[r,i]=a.useState((0,l.Ne)(e)),[c,o]=a.useState(null==r?void 0:r.isMuted),[u,s]=a.useState(null==r?void 0:r.isSubscribed),[d,f]=a.useState(null==r?void 0:r.track),[p,m]=a.useState("landscape"),h=a.useRef(),{className:g,trackObserver:E}=a.useMemo(()=>(0,l.an)(e),[null!=(n=e.participant.sid)?n:e.participant.identity,e.source,(0,l.Z7)(e)&&e.publication.trackSid]);return a.useEffect(()=>{let e=E.subscribe(e=>{l.cM.debug("update track",e),i(e),o(null==e?void 0:e.isMuted),s(null==e?void 0:e.isSubscribed),f(null==e?void 0:e.track)});return()=>null==e?void 0:e.unsubscribe()},[E]),a.useEffect(()=>{var n,r;return d&&(h.current&&d.detach(h.current),(null==(n=t.element)?void 0:n.current)&&!((0,l.D0)(e.participant)&&(null==d?void 0:d.kind)==="audio")&&d.attach(t.element.current)),h.current=null==(r=t.element)?void 0:r.current,()=>{h.current&&(null==d||d.detach(h.current))}},[d,t.element]),a.useEffect(()=>{var e,t;"number"==typeof(null==(e=null==r?void 0:r.dimensions)?void 0:e.width)&&"number"==typeof(null==(t=null==r?void 0:r.dimensions)?void 0:t.height)&&m(r.dimensions.width>r.dimensions.height?"landscape":"portrait")},[r]),{publication:r,isMuted:c,isSubscribed:u,track:d,elementProps:eg(t.props,v({className:g,"data-lk-local-participant":e.participant.isLocal,"data-lk-source":null==r?void 0:r.source},(null==r?void 0:r.kind)==="video"&&{"data-lk-orientation":p}))}}var eC=a.forwardRef(function(e,t){var{onTrackClick:n,onClick:r,onSubscriptionStatusChanged:l,trackRef:i,manageSubscription:u}=e,s=E(e,["onTrackClick","onClick","onSubscriptionStatusChanged","trackRef","manageSubscription"]);let d=z(i),f=a.useRef(null);a.useImperativeHandle(t,()=>f.current);let p=o.S1({root:f.current}),[m]=o.nj(p,3e3);a.useEffect(()=>{u&&d.publication instanceof c.E8&&(null==m?void 0:m.isIntersecting)===!1&&(null==p?void 0:p.isIntersecting)===!1&&d.publication.setSubscribed(!1)},[m,d,u]),a.useEffect(()=>{u&&d.publication instanceof c.E8&&(null==p?void 0:p.isIntersecting)===!0&&d.publication.setSubscribed(!0)},[p,d,u]);let{elementProps:h,publication:b,isSubscribed:w}=eS(d,{element:f,props:s});return a.useEffect(()=>{null==l||l(!!w)},[w,l]),a.createElement("video",g(v({ref:f},h),{muted:!0,onClick:e=>{null==r||r(e),null==n||n({participant:null==d?void 0:d.participant,track:b})}}))}),eR=a.forwardRef(function(e,t){var{trackRef:n,onSubscriptionStatusChanged:r,volume:i,muted:o}=e,u=E(e,["trackRef","onSubscriptionStatusChanged","volume","muted"]);let s=z(n),d=a.useRef(null);a.useImperativeHandle(t,()=>d.current);let{elementProps:f,isSubscribed:p,track:m,publication:h}=eS(s,{element:d,props:u});return a.useEffect(()=>{null==r||r(!!p)},[p,r]),a.useEffect(()=>{void 0!==m&&void 0!==i&&(m instanceof c.rl?m.setVolume(i):l.cM.warn("Volume can only be set on remote audio tracks."))},[i,m]),a.useEffect(()=>{void 0!==h&&void 0!==o&&(h instanceof c.E8?h.setEnabled(!o):l.cM.warn("Can only call setEnabled on remote track publications."))},[o,h,m]),a.createElement("audio",v({ref:d},f))});function ex(e){let t=!!L();return e.participant&&!t?a.createElement(A.Provider,{value:e.participant},e.children):a.createElement(a.Fragment,null,e.children)}function eP(e){let t=!!O();return e.trackRef&&!t?a.createElement(P.Provider,{value:e.trackRef},e.children):a.createElement(a.Fragment,null,e.children)}var eO=a.forwardRef(function(e,t){var n,r,i,{trackRef:o,children:u,onParticipantClick:s,disableSpeakingIndicator:d}=e,f=E(e,["trackRef","children","onParticipantClick","disableSpeakingIndicator"]);let p=z(o),{elementProps:m}=function({trackRef:e,onParticipantClick:t,disableSpeakingIndicator:n,htmlProps:r}){let i=z(e),o=a.useMemo(()=>{let{className:e}=(0,l.Cn)();return I(r,{className:e,onClick:e=>{var n,a;if(null==(n=r.onClick)||n.call(r,e),"function"==typeof t){let e=null!=(a=i.publication)?a:i.participant.getTrackPublication(i.source);t({participant:i.participant,track:e})}}})},[r,t,i.publication,i.source,i.participant]),u=i.participant.getTrackPublication(c.fQ.Source.Microphone),s=a.useMemo(()=>({participant:i.participant,source:c.fQ.Source.Microphone,publication:u}),[u,i.participant]),d=_(i),f=_(s),p=function(e){let t=N(e);return M(a.useMemo(()=>(0,l.yn)(t),[t]),t.isSpeaking)}(i.participant),m=function(e){if(e.publication instanceof c.Zr){let t=e.publication.track;if(t){let{facingMode:e}=(0,c.ul)(t);return e}}return"undefined"}(i);return{elementProps:v({"data-lk-audio-muted":f,"data-lk-video-muted":d,"data-lk-speaking":!0!==n&&p,"data-lk-local-participant":i.participant.isLocal,"data-lk-source":i.source,"data-lk-facing-mode":m},o)}}({htmlProps:f,disableSpeakingIndicator:d,onParticipantClick:s,trackRef:p}),h=function(e,t={}){let n=N(e),r=V(t.room);return M(a.useMemo(()=>(0,l.ZJ)(r,n),[r,n]),n instanceof c.Ix?n.isE2EEEnabled:!!(null==n?void 0:n.isEncrypted))}(p.participant),g=x(),b=null==(r=a.useContext(F))?void 0:r.autoSubscription,w=a.useCallback(e=>{p.source&&!e&&g&&g.pin.dispatch&&(0,l.WD)(p,g.pin.state)&&g.pin.dispatch({msg:"clear_pin"})},[p,g]);return a.createElement("div",v({ref:t,style:{position:"relative"}},m),a.createElement(eP,{trackRef:p},a.createElement(ex,{participant:p.participant},null!=u?u:a.createElement(a.Fragment,null,(0,l.Z7)(p)&&((null==(i=p.publication)?void 0:i.kind)==="video"||p.source===c.fQ.Source.Camera||p.source===c.fQ.Source.ScreenShare)?a.createElement(eC,{trackRef:p,onSubscriptionStatusChanged:w,manageSubscription:b}):(0,l.Z7)(p)&&a.createElement(eR,{trackRef:p,onSubscriptionStatusChanged:w}),a.createElement("div",{className:"lk-participant-placeholder"},a.createElement(ey,null)),a.createElement("div",{className:"lk-participant-metadata"},a.createElement("div",{className:"lk-participant-metadata-item"},p.source===c.fQ.Source.Camera?a.createElement(a.Fragment,null,h&&a.createElement(el,{style:{marginRight:"0.25rem"}}),a.createElement(eM,{trackRef:{participant:p.participant,source:c.fQ.Source.Microphone},show:"muted"}),a.createElement(ek,null)):a.createElement(a.Fragment,null,a.createElement(ef,{style:{marginRight:"0.25rem"}}),a.createElement(ek,null,"'s screen"))),a.createElement(ew,{className:"lk-participant-metadata-item"}))),a.createElement(eh,{trackRef:p}))))});function ez(e){let t=eg(e,{className:"lk-focus-layout"});return a.createElement("div",v({},t),e.children)}function eA(e){var{tracks:t}=e,n=E(e,["tracks"]);return a.createElement(a.Fragment,null,t.map(e=>{var t,r;return a.createElement(P.Provider,{value:e,key:(0,l.Fq)(e)},(t=n.children,a.Children.map(t,e=>a.isValidElement(e)&&a.Children.only(t)?(e.props.class&&(null!=r||(r={}),r.class=(0,i.Z)(e.props.class,r.class),r.style=v(v({},e.props.style),r.style)),a.cloneElement(e,g(v({},r),{key:void 0}))):e)))}))}function eL({totalPageCount:e,nextPage:t,prevPage:n,currentPage:r,pagesContainer:i}){let[c,o]=a.useState(!1);return a.useEffect(()=>{let e;return i&&(e=(0,l.ti)(i.current,2e3).subscribe(o)),()=>{e&&e.unsubscribe()}},[i]),a.createElement("div",{className:"lk-pagination-control","data-lk-user-interaction":c},a.createElement("button",{className:"lk-button",onClick:n},a.createElement(er,null)),a.createElement("span",{className:"lk-pagination-count"},`${r} of ${e}`),a.createElement("button",{className:"lk-button",onClick:t},a.createElement(er,null)))}var eN=a.forwardRef(function({totalPageCount:e,currentPage:t},n){let r=Array(e).fill("").map((e,n)=>n+1===t?a.createElement("span",{"data-lk-active":!0,key:n}):a.createElement("span",{key:n}));return a.createElement("div",{ref:n,className:"lk-pagination-indicator"},r)});function eZ(e){var{tracks:t}=e,n=E(e,["tracks"]);let r=a.createRef(),i=a.useMemo(()=>eg(n,{className:"lk-grid-layout"}),[n]),{layout:c}=function(e,t,n={}){var r;let i=null!=(r=n.gridLayouts)?r:l.D9,{width:c,height:o}=k(e),u=(0,l.Yp)(i,t,c,o);return a.useEffect(()=>{e.current&&u&&(e.current.style.setProperty("--lk-col-count",null==u?void 0:u.columns.toString()),e.current.style.setProperty("--lk-row-count",null==u?void 0:u.rows.toString()))},[e,u]),{layout:u,containerWidth:c,containerHeight:o}}(r,t.length),o=function(e,t){let[n,r]=a.useState(1),l=Math.max(Math.ceil(t.length/e),1);n>l&&r(l);let i=n*e,c=i-e,o=e=>{r(t=>"next"===e?t===l?t:t+1:1===t?t:t-1)},u=J(t,e).slice(c,i);return{totalPageCount:l,nextPage:()=>o("next"),prevPage:()=>o("previous"),setPage:e=>{e>l?r(l):e<1?r(1):r(e)},firstItemIndex:c,lastItemIndex:i,tracks:u,currentPage:n}}(c.maxTiles,t);return!function(e,t={}){var n;let r=a.useRef(null),l=a.useRef(null),i=null!=(n=t.minSwipeDistance)?n:50,c=e=>{l.current=null,r.current=e.targetTouches[0].clientX},o=e=>{l.current=e.targetTouches[0].clientX},u=a.useCallback(()=>{if(!r.current||!l.current)return;let e=r.current-l.current,n=e>i,a=e<-i;n&&t.onLeftSwipe&&t.onLeftSwipe(),a&&t.onRightSwipe&&t.onRightSwipe()},[i,t]);a.useEffect(()=>{let t=e.current;return t&&(t.addEventListener("touchstart",c,{passive:!0}),t.addEventListener("touchmove",o,{passive:!0}),t.addEventListener("touchend",u,{passive:!0})),()=>{t&&(t.removeEventListener("touchstart",c),t.removeEventListener("touchmove",o),t.removeEventListener("touchend",u))}},[e,u])}(r,{onLeftSwipe:o.nextPage,onRightSwipe:o.prevPage}),a.createElement("div",v({ref:r,"data-lk-pagination":o.totalPageCount>1},i),a.createElement(eA,{tracks:o.tracks},n.children),t.length>c.maxTiles&&a.createElement(a.Fragment,null,a.createElement(eN,{totalPageCount:o.totalPageCount,currentPage:o.currentPage}),a.createElement(eL,v({pagesContainer:r},o))))}function eQ(e){var{tracks:t,orientation:n}=e,r=E(e,["tracks","orientation"]);let i=a.useRef(null),[c,o]=a.useState(0),{width:u,height:s}=k(i),d=n||(s>=u?"vertical":"horizontal"),f="vertical"===d?Math.max(.6000000000000001*u,130):Math.max(1.6*s,140),p=(0,l.Iz)(),m="vertical"===d?Math.max((s-p)/f,1):Math.max((u-p)/f,1),h=Math.round(m);.5>Math.abs(m-c)?h=Math.round(c):c!==m&&o(m);let g=J(t,h);return a.useLayoutEffect(()=>{i.current&&(i.current.dataset.lkOrientation=d,i.current.style.setProperty("--lk-max-visible-tiles",h.toString()))},[h,d]),a.createElement("aside",v({key:d,className:"lk-carousel",ref:i},r),a.createElement(eA,{tracks:g},r.children))}function eT({value:e,onPinChange:t,onWidgetChange:n,children:r}){let i=function(e){let[t,n]=a.useReducer(S,l.R0),[r,i]=a.useReducer(y,l.lA);return null!=e?e:{pin:{dispatch:n,state:t},widget:{dispatch:i,state:r}}}(e);return a.useEffect(()=>{l.cM.debug("PinState Updated",{state:i.pin.state}),t&&i.pin.state&&t(i.pin.state)},[i.pin.state,t]),a.useEffect(()=>{l.cM.debug("Widget Updated",{widgetState:i.widget.state}),n&&i.widget.state&&n(i.widget.state)},[n,i.widget.state]),a.createElement(C.Provider,{value:i},r)}var eV=a.forwardRef(function(e,t){let{room:n,htmlProps:r}=function(e){let t=v(v({},q),e),{token:n,serverUrl:r,options:i,room:o,connectOptions:u,connect:s,audio:d,video:f,screen:p,onConnected:m,onDisconnected:h,onError:g,onMediaDeviceFailure:b,onEncryptionError:w,simulateParticipants:k}=t,M=E(t,["token","serverUrl","options","room","connectOptions","connect","audio","video","screen","onConnected","onDisconnected","onError","onMediaDeviceFailure","onEncryptionError","simulateParticipants"]);i&&o&&l.cM.warn("when using a manually created room, the options object will be ignored. set the desired options directly when creating the room instead.");let[y,S]=a.useState();a.useEffect(()=>{S(null!=o?o:new c.du(i))},[o]);let C=a.useMemo(()=>{let{className:e}=(0,l.WM)();return I(M,{className:e})},[M]);return a.useEffect(()=>{if(!y)return;let e=()=>{let e=y.localParticipant;l.cM.debug("trying to publish local tracks"),Promise.all([e.setMicrophoneEnabled(!!d,"boolean"!=typeof d?d:void 0),e.setCameraEnabled(!!f,"boolean"!=typeof f?f:void 0),e.setScreenShareEnabled(!!p,"boolean"!=typeof p?p:void 0)]).catch(e=>{l.cM.warn(e),null==g||g(e)})},t=e=>{let t=c.CB.getFailure(e);null==b||b(t)},n=e=>{null==w||w(e)};return y.on(c.TQ.SignalConnected,e).on(c.TQ.MediaDevicesError,t).on(c.TQ.EncryptionError,n),()=>{y.off(c.TQ.SignalConnected,e).off(c.TQ.MediaDevicesError,t).off(c.TQ.EncryptionError,n)}},[y,d,f,p,g,w,b]),a.useEffect(()=>{if(y){if(k){y.simulateParticipants({participants:{count:k},publish:{audio:!0,useRealTracks:!0}});return}if(!n){l.cM.debug("no token yet");return}if(!r){l.cM.warn("no livekit url provided"),null==g||g(Error("no livekit url provided"));return}s?(l.cM.debug("connecting"),y.connect(r,n,u).catch(e=>{l.cM.warn(e),null==g||g(e)})):(l.cM.debug("disconnecting because connect is false"),y.disconnect())}},[s,n,JSON.stringify(u),y,g,r,k]),a.useEffect(()=>{if(!y)return;let e=e=>{switch(e){case c.em.Disconnected:h&&h();break;case c.em.Connected:m&&m()}};return y.on(c.TQ.ConnectionStateChanged,e),()=>{y.off(c.TQ.ConnectionStateChanged,e)}},[n,m,h,y]),a.useEffect(()=>{if(y)return()=>{l.cM.info("disconnecting on onmount"),y.disconnect()}},[y]),{room:y,htmlProps:C}}(e);return a.createElement("div",v({ref:t},r),n&&a.createElement(Z.Provider,{value:n},a.createElement(F.Provider,{value:e.featureFlags},e.children)))});function eF({volume:e,muted:t}){let n=$([c.fQ.Source.Microphone,c.fQ.Source.ScreenShareAudio,c.fQ.Source.Unknown],{updateOnlyOn:[],onlySubscribed:!0}).filter(e=>!(0,l.D0)(e.participant)&&e.publication.kind===c.fQ.Kind.Audio);return a.createElement("div",{style:{display:"none"}},n.map(n=>a.createElement(eR,{key:(0,l.Fq)(n),trackRef:n,volume:e,muted:t})))}}}]);